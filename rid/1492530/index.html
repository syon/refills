<!DOCTYPE html><html lang="ja"><head><title>Node.js CODE TIPS :: JavaScript | Refills</title><meta property="og:type" content="article"><meta property="og:locale" content="ja_JP"><meta property="og:title" content="Node.js CODE TIPS :: JavaScript | Refills"><meta property="og:site_name" content="Refills"><meta property="og:type" content="article"><meta property="og:url" content="https://syon.github.io/refills/rid/1492530/"><link rel="canonical" href="https://syon.github.io/refills/rid/1492530/"><meta property="og:image" content="https://syon.github.io/refills/assets/img/ogp.png"><meta charset="utf-8"><meta name="viewport" content="initial-scale=1, width=device-width"><link rel="stylesheet" href="/refills/assets/vendor/octicons/octicons.min.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Italianno|Lato:400,700,900|Merriweather:400,400italic,700,700italic"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css"><link rel="stylesheet" href="/refills/assets/bundle.css"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-37634759-11', 'auto');
ga('send', 'pageview');</script></head><body><header class="site-head"><div class="container"><div class="logo"><a href="/refills/"><h1 class="site-name">Refills</h1></a></div></div></header><section id="article"><div class="a-title"><div class="r-meta-cate"><span class="r-category">JavaScript</span></div><h1 class="r-title">Node.js CODE TIPS</h1><div class="r-meta-date"><a href="https://github.com/syon/refills/commits/master/src/refills/javascript/nodejs-code-tips.adoc" target="_blank" class="r-date"><span>2019.07.25</span></a></div></div><article class="main"><div class="sect1">
<h2 id="__">&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x8AAD;&#x307F;&#x8FBC;&#x307F;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>&#x30C6;&#x30AD;&#x30B9;&#x30C8;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x8AAD;&#x307F;&#x8FBC;&#x307F;&#x3067;&#x3042;&#x308B;&#x5834;&#x5408;<code>&apos;utf-8&apos;</code>&#x306E;&#x3088;&#x3046;&#x306B;&#x30A8;&#x30F3;&#x30B3;&#x30FC;&#x30C7;&#x30A3;&#x30F3;&#x30B0;&#x3092;&#x6307;&#x5B9A;&#x3059;&#x308B;&#x3002;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>File System | Node.js Documentation</p>
<div class="ulist">
<ul>
<li>
<p><code><a href="https://nodejs.org/api/fs.html#fs_fs_readfilesync_path_options">fs.readFileSync(path[, options])</a></code></p>
</li>
<li>
<p><code><a href="https://nodejs.org/api/fs.html#fs_fs_readfile_path_options_callback">fs.readFile(path[, options], callback)</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;fs&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// sync</span>
<span class="token keyword">const</span> text <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&apos;./input.txt&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;utf8&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// async</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&apos;./input.txt&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;utf8&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> text<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_shift_jis">Shift JIS&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x8AAD;&#x8FBC;&#x3068;&#x66F8;&#x8FBC;</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ npm <span class="token function">install</span> -S iconv-lite</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;fs&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> iconv <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;iconv-lite&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> file <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&apos;./input.txt&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> text<span class="token operator">=</span> iconv<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>Buffer<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Shift_JIS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// ...</span>
<span class="token keyword">const</span> buf <span class="token operator">=</span> iconv<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> <span class="token string">&quot;Shift_JIS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">&apos;output.txt&apos;</span><span class="token punctuation">,</span> buf<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="___2">&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x66F8;&#x304D;&#x8FBC;&#x307F;</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="___3">&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x66F8;&#x304D;&#x8FBC;&#x307F;&#xFF08;&#x4E0A;&#x66F8;&#x304D;&#xFF09;</h3>
<div class="ulist">
<ul>
<li>
<p><code><a href="https://nodejs.org/api/fs.html#fs_fs_writefile_file_data_options_callback">fs.writeFile(file, data[, options], callback)</a></code></p>
</li>
<li>
<p><code><a href="https://nodejs.org/api/fs.html#fs_fs_writefilesync_file_data_options">fs.writeFileSync(file, data[, options])</a></code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;out.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___4">&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x66F8;&#x304D;&#x8FBC;&#x307F;&#xFF08;&#x8FFD;&#x8A18;&#xFF09;</h3>
<div class="ulist">
<ul>
<li>
<p><code><a href="https://nodejs.org/api/fs.html#fs_fs_appendfile_file_data_options_callback">fs.appendFile(file, data[, options], callback)</a></code></p>
</li>
<li>
<p><code><a href="https://nodejs.org/api/fs.html#fs_fs_appendfilesync_file_data_options">fs.appendFileSync(file, data[, options])</a></code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_1">1&#x5217;&#x8AAD;&#x307F;&#x8FBC;&#x307F;</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">sample.txt</div>
<div class="content">
<pre class="highlight"><code>red
blue
green
yellow</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;fs&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> content <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&apos;sample.txt&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> colors <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&apos;\n&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//=&gt; [ &apos;red&apos;, &apos;blue&apos;, &apos;green&apos;, &apos;yellow&apos; ]</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="___5">&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30B3;&#x30D4;&#x30FC;</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://qiita.com/PianoScoreJP/items/ec3d1b64d5e3a3bfa3b4">Node.js &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x30B3;&#x30D4;&#x30FC;&#x3059;&#x308B;&#x305F;&#x3076;&#x3093;&#x4E00;&#x756A;&#x7C21;&#x5358;&#x306A;&#x65B9;&#x6CD5; - Qiita</a></p>
</li>
<li>
<p><a href="https://qiita.com/tadnakam/items/6b6e0da5bb05c86bd573">node.js &#x3067;&#x7C21;&#x5358;&#x306B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30B3;&#x30D4;&#x30FC;&#x304C;&#x3067;&#x304D;&#x308B;&#x3088;&#x3046;&#x306B;&#x306A;&#x3063;&#x3066;&#x307E;&#x3057;&#x305F;&#x3002; - Qiita</a></p>
<div class="ulist">
<ul>
<li>
<p><code><a href="https://nodejs.org/api/fs.html#fs_fs_copyfile_src_dest_flags_callback">fs.copyFile(src, dest[, flags], callback)</a></code></p>
</li>
<li>
<p><code><a href="https://nodejs.org/api/fs.html#fs_fs_copyfile_src_dest_flags_callback">fs.copyFileSync(src, dest[, flags])</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;fs&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">&apos;src.txt&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">&apos;dest.txt&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_glob">glob</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/isaacs/node-glob">isaacs/node-glob: glob functionality for node.js</a></p>
<div class="dlist">
<dl>
<dt class="hdlist1">Options</dt>
<dd>
<p><a href="https://github.com/isaacs/node-glob#options" class="bare">https://github.com/isaacs/node-glob#options</a></p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">npm i glob</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js"><span class="token keyword">const</span> glob <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;glob&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> files <span class="token operator">=</span> glob<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token string">&quot;**/*.js&quot;</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_csv">CSV</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://syon.github.io/refills/rid/1546773/">Node.js CSV &#x307E;&#x3068;&#x3081; :: JavaScript | Refills</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_url_path_join">URL Path Join</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>url.resolve(from, to)</code> &#x3092;&#x4F7F;&#x7528;&#x3059;&#x308B;&#x3002;
&#x3088;&#x304F;&#x3042;&#x308B; join &#x306B;&#x3088;&#x308B;&#x9023;&#x7D50;&#x3067;&#x306F;&#x306A;&#x304F;&#x3001;&#x73FE;&#x5728;&#x5730;&#x3068;&#x884C;&#x304D;&#x5148;&#x3092;&#x6E21;&#x3059;&#x3002;
from &#x3067;&#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F; URL &#x3092;&#x73FE;&#x5728;&#x5730;&#x3068;&#x3057;&#x3066; to &#x3068;&#x3044;&#x3046;&#x884C;&#x304D;&#x5148;&#x3092;&#x547D;&#x4EE4;&#x3055;&#x308C;&#x305F;&#x5834;&#x5408;&#x306B;
&#x7D50;&#x5C40;&#x3069;&#x3053;&#x306B;&#x884C;&#x304F;&#x306E;&#x304B;&#x3092;&#x89E3;&#x660E;&#x3057;&#x305F;&#x7D50;&#x679C;&#x3092;&#x8FD4;&#x3059;&#x3002;
from &#x306F; <code>http://</code> &#x3067;&#x958B;&#x59CB;&#x3059;&#x308B;&#x5FC5;&#x8981;&#x306F;&#x306A;&#x3044;&#x3002;
&#x9006;&#x306B; to &#x304C; <code>http://</code> &#x304B;&#x3089;&#x59CB;&#x307E;&#x308B; URL &#x3067;&#x3082;&#x3088;&#x3044;&#x3002;
&#x305D;&#x308C;&#x306F;&#x5916;&#x90E8;&#x30B5;&#x30A4;&#x30C8;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x6642;&#x3068;&#x540C;&#x3058;&#x6319;&#x52D5;&#x3068;&#x8A00;&#x3048;&#x308B;&#x3002;</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://nodejs.org/api/url.html#url_url_resolve_from_to">url.resolve(from, to) - URL | Node.js Documentation</a></p>
</li>
<li>
<p><a href="https://stackoverflow.com/questions/16301503/can-i-use-requirepath-join-to-safely-concatenate-urls">node.js - Can I use require(&quot;path&quot;).join to safely concatenate urls? - Stack Overflow</a></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">url<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&apos;/japan/tokyo/shibuya&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;ebisu&apos;</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">//=&gt; &apos;/japan/tokyo/ebisu&apos;</span>
url<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&apos;http://world.com&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;japan&apos;</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">//=&gt; &apos;http://world.com/japan&apos;</span>
url<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&apos;http://world.com/japan/tokyo/&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;../osaka/&apos;</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">//=&gt; &apos;http://world.com/japan/osaka/&apos;</span>
url<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&apos;http://world.com/japan/tokyo/&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;/america/new-york&apos;</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">//=&gt; &apos;http://world.com/america/new-york&apos;</span>
url<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&apos;http://world.com&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;https://google.com&apos;</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">//=&gt; &apos;https://google.com/&apos;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tktk">tktk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.npmjs.com/package/tktk">tktk</a></p>
</li>
</ul>
</div>
</div>
</div></article><div class="adsense"><div><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Refills Bottom (Responsive) -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2136746860059501"
     data-ad-slot="2358320270"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></div><footer><hr><h3>Index of&nbsp;<a href="/refills/bid/javascript/">JavaScript</a></h3><div class="article-links"><a href="/refills/rid/1463065/"><div class="left"><span class="octicon octicon-file-text"></span>CODE TIPS</div></a><a href="/refills/rid/1492530/"><div class="left"><span class="octicon octicon-file-text"></span>Node.js CODE TIPS</div></a><a href="/refills/rid/1494600/"><div class="left"><span class="octicon octicon-file-text"></span>Fetch API まとめ</div></a><a href="/refills/rid/1497767/"><div class="left"><span class="octicon octicon-file-text"></span>モダン CODE TIPS</div></a><a href="/refills/rid/1499505/"><div class="left"><span class="octicon octicon-file-text"></span>HTTP×Electronアプリのひな形の作り方から配布まで</div></a><a href="/refills/rid/1511515/"><div class="left"><span class="octicon octicon-file-text"></span>npm debug の使い方</div></a><a href="/refills/rid/1518800/"><div class="left"><span class="octicon octicon-file-text"></span>古いJavaScript(ES5)でもESLint・Prettierの恩恵を受けよう</div></a><a href="/refills/rid/1546773/"><div class="left"><span class="octicon octicon-file-text"></span>Node.js CSV まとめ</div></a><a href="/refills/rid/1564145/"><div class="left"><span class="octicon octicon-file-text"></span>Node.js × SQL Server 使い方</div></a><a href="/refills/rid/1566555/"><div class="left"><span class="octicon octicon-file-text"></span>Moment.js メモ</div></a></div></footer><footer><hr><div class="meta"><div class="left"><a href="https://github.com/syon" class="author"><img src="/refills/assets/img/syon.jpg" alt="syon" target="_blank"><span>syon</span></a></div><div class="right"><div class="repo"><span><a href="https://github.com/syon/refills/commits/master/src/refills/javascript/nodejs-code-tips.adoc" target="_blank">更新履歴</a></span><a href="https://github.com/syon/refills" target="_blank">Repo</a><a href="https://app.wercker.com/project/byKey/3938da859441da2240b9f5d8f7d9f9fd"><img alt="Wercker status" src="https://app.wercker.com/status/3938da859441da2240b9f5d8f7d9f9fd/s/master"></a></div></div></div></footer></section></body></html>